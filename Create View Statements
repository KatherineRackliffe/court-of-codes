CREATE VIEW welcomePageView AS
SELECT users.userid, users.username
FROM users;

CREATE VIEW homepageview AS
SELECT book.isbn, book.booktitle, book.authorfname, book.authorlname, AVG(userreview.numericalreview) AS averagereview
FROM book
JOIN userreview ON book.isbn = userreview.isbn
GROUP BY book.isbn, book.booktitle, book.authorfname, book.authorlname;

CREATE VIEW bookview AS
SELECT book.isbn, book.booktitle, book.authorfname, book.authorlname, book.datepublished, book.pagecount, AVG(userreview.NumericalReview) AS AverageReview, Users.UserID, Users.Username
FROM book
JOIN userreview ON book.isbn = userreview.isbn
JOIN users ON userreview.userid = users.userid
GROUP BY book.isbn, book.booktitle, book.authorfname, book.authorlname, book.datepublished, book.pagecount, users.userid, users.username;

CREATE VIEW usershelfview AS
SELECT users.userid, users.username, userlist.listname, userlist.listid
FROM users
JOIN userlist ON users.userid = userlist.userid;

CREATE VIEW userlistview AS
SELECT 
    u.userid,
    u.username,
    ul.listname,
    ul.listid,
    b.isbn,
    b.booktitle,
    b.authorfname,
    b.authorlname,
    b.datepublished,
    b.pagecount
FROM 
    users u
JOIN 
    userlist ul ON u.userid = ul.userid
JOIN 
    BookInList bil ON ul.listid = bil.listid
    BookInList bil ON ul.listid = bil.listid
JOIN 
    Book b ON bil.isbn = b.isbn;



